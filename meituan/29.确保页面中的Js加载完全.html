<!DOCTYPE html>
<html>
<head>
  <title>确定页面的js加载完全</title>
  <meta charset="utf-8" />
</head>
<body>
  <script type="text/javascript">
    var n = document.createElement("script");
    n.type = "text/javascript";
    //以上省略部分代码
    //ie支持script的readystatechange属性(IE support the readystatechange event for script and css nodes)
    if(ua.ie){
       n.onreadystatechange = function(){
           var rs = this.readyState;
           if('loaded' === rs || 'complete'===rs){
               n.onreadystatechange = null;
               f(id,url); //回调函数
           }
    };
    //省略部分代码
    //safari 3.x supports the load event for script nodes(DOM2)
    n.addEventListener('load',function(){
       f(id,url);
    });
    //firefox and opera support onload(but not dom2 in ff) handlers for
    //script nodes. opera, but no ff, support the onload event for link
    //nodes.
    }else{
       n.onload = function(){
       f(id,url);
      };
    }
</body>
</html>